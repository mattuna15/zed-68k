00002000 Starting Address
Assembler used: EASy68K Editor/Assembler v5.16.01
Created On: 12/04/2021 12:38:37

00000000  =00F00009                  1  ACIAC    EQU $F00009
00000000  =00F0000B                  2  ACIAD    EQU ACIAC+2
00000000                             3  
00000000  =00F20009                  4  ACIA2C    EQU $F20009
00000000  =00F2000B                  5  ACIA2D    EQU ACIA2C+2
00000000                             6  
00000000  =00F30009                  7  ACIA3C    EQU $F30009
00000000  =00F3000B                  8  ACIA3D    EQU ACIA3C+2
00000000                             9  
00000000  =00002000                 10  INT_ON   EQU  $2000    ; BOTH, SET SUPERVISOR MODE, S=1
00000000  =00002700                 11  INT_OFF  EQU  $2700
00000000                            12  
00000000  =00000000                 13  RDRF    EQU 0           ; ACIAC Receive Data Register Full
00000000  =00000001                 14  TDRE    EQU 1           ; ACIAC Transmit Data Register Empty
00000000                            15  
00000000  =00000005                 16  SUPERVISOR_BIT EQU 5
00000000                            17  
00000000  =00000007                 18  TRACE_BIT EQU 7
00000000                            19  
00000000  =0000000D                 20  CR      EQU 13
00000000  =0000000A                 21  LF      EQU 10
00000000  =00000020                 22  SP      EQU 32
00000000  =00000008                 23  BS      EQU 8
00000000  =0000001E                 24  RS      EQU $1E
00000000  =0000001B                 25  ESC     EQU $1B
00000000                            26  
00000000                            27  
00002000                            28      ORG $2000
00002000                            29  **************************************************
00002000                            30  
00002000                            31  MAIN 
00002000                            32  
00002000  46FC 2700                 33      MOVE.W #INT_OFF,SR 
00002004  6100 00F6                 34      BSR INIT_ACIA
00002008                            35     
00002008  47F9 000021B2             36      LEA.L TITLE1.L,A3     ; print START MESSAGE
0000200E  6100 0178                 37      BSR PSTR
00002012                            38      
00002012                            39      
00002012  08B9 0000 00F40008        40      BCLR.B #0,$F40008
0000201A  08B9 0001 00F40008        41      BCLR.B #1,$F40008
00002022  08B9 0002 00F40008        42      BCLR.B #2,$F40008
0000202A                            43      
0000202A  0839 0005 00F40009        44  WAIT    BTST.B #5,$F40009
00002032  67F6                      45          BEQ.S WAIT
00002034                            46          
00002034  47F9 000021F5             47          LEA.L READYSTR.L,A3 
0000203A  6100 014C                 48          BSR PSTR
0000203E                            49          
0000203E  08F9 0002 00F40009        50          BSET.B #2,$F40009
00002046  47F9 0000220B             51          LEA.L LOSTR.L,A3 
0000204C  6100 013A                 52          BSR PSTR
00002050                            53          
00002050  13FC 0041 00F4000B        54          MOVE.B #$41,$F4000b
00002058  08F9 0003 00F40008        55          BSET.B #3,$F40008 ; VALID
00002060                            56          
00002060  47F9 000021EC             57          LEA.L BUSYSTR.L,A3 
00002066  6100 0120                 58          BSR PSTR
0000206A                            59  
0000206A  0839 0005 00F40009        60  WAIT2   BTST.B #5,$F40009 ; NOT READY
00002072  66F6                      61          BNE.S WAIT2
00002074                            62  
00002074  08B9 0003 00F40009        63          Bclr.B #3,$F40009 ; NOT VALID
0000207C                            64          
0000207C  0839 0005 00F40009        65  WAIT3   BTST.B #5,$F40009 ; READY
00002084  67F6                      66          BEQ.S WAIT3
00002086                            67                  
00002086  13FC 0001 00F4000B        68          MOVE.B #$01,$F4000b
0000208E  08F9 0003 00F40009        69          BSET.B #3,$F40009 ; VALID
00002096                            70          
00002096  0839 0005 00F40009        71  WAIT4   BTST.B #5,$F40009 ; NOT READY
0000209E  66F6                      72          BNE.S WAIT4
000020A0                            73  
000020A0  08B9 0003 00F40009        74          Bclr.B #3,$F40009 ; NOT VALID
000020A8                            75   
000020A8  0839 0005 00F40009        76  WAIT5   BTST.B #5,$F40009 ; READY
000020B0  67F6                      77          BEQ.S WAIT5     
000020B2                            78  
000020B2  08B9 0002 00F40009        79          Bclr.B #2,$F40009
000020BA  47F9 000021FF             80          LEA.L HISTR.L,A3 
000020C0  6100 00C6                 81          BSR PSTR
000020C4                            82    
000020C4                            83          
000020C4  43F9 00F4000C             84          LEA.L $F4000C, A1
000020CA  3011                      85          MOVE.w (A1), d0
000020CC                            86          
000020CC  4EB9 000020D8             87          JSR OUT1X
000020D2                            88          
000020D2                            89      
000020D2  4EF9 00A00BB4             90      JMP $A00BB4
000020D8                            91      
000020D8                            92  *****************
000020D8                            93  
000020D8  1F00                      94  OUT1X        MOVE.B D0,-(SP)    ;SAVE D0
000020DA  C03C 000F                 95               AND.B #$F,D0
000020DE  0600 0030                 96               ADD.B #'0',D0
000020E2  B03C 0039                 97               CMP.B #'9',D0
000020E6  6302                      98               BLS.S   OUT1X1
000020E8  5E00                      99               ADD.B #7,D0
000020EA  6100 002A                100  OUT1X1       BSR COUT
000020EE  101F                     101               MOVE.B (SP)+,D0    ;RESTORE D0
000020F0  4E75                     102               RTS
000020F2                           103  
000020F2  E818                     104  OUT2X        ROR.B #4,D0
000020F4  61E2                     105               BSR.S OUT1X
000020F6  E918                     106               ROL.B #4,D0
000020F8  60DE                     107               BRA OUT1X
000020FA                           108  
000020FA  4E75                     109          RTS
000020FC                           110  **************************************************   
000020FC                           111     ; INIT ACIA
000020FC                           112  
000020FC  13FC 0003 00F00009       113  INIT_ACIA  MOVE.B #3,ACIAC.L   ; RESET ACIA
00002104  303C 0064                114             MOVE.W #100,D0
00002108  51C8 FFFE                115             DBRA  D0,*
0000210C  13FC 0015 00F00009       116             MOVE.B #$15,ACIAC.L   ; rts enabled 9600 8ne
00002114  4E75                     117             RTS
00002116                           118  
00002116  0839 0001 00F00009       119  COUT      BTST.B #TDRE,ACIAC.L
0000211E  67F6                     120            BEQ.S  COUT
00002120  13C0 00F0000B            121            MOVE.B D0,ACIAD.L
00002126  4E75                     122            RTS
00002128                           123  
00002128                           124  
00002128  0839 0000 00F20009       125  CINS      BTST.B #RDRF,ACIA2C.L
00002130  67F6                     126            BEQ.S  CINS
00002132  1039 00F2000B            127            MOVE.B ACIA2D.L,D0
00002138  4E75                     128            RTS
0000213A                           129  
0000213A                           130  
0000213A  0839 0000 00F00009       131  CIN      BTST.B #RDRF,ACIAC.L
00002142  67F6                     132           BEQ.S  CIN
00002144  1039 00F0000B            133           MOVE.B ACIAD.L,D0
0000214A  61CA                     134           BSR COUT
0000214C  4E75                     135           RTS
0000214E                           136           
0000214E  0839 0001 00F30009       137  WOUT      BTST.B #TDRE,ACIA3C.L
00002156  6706                     138            BEQ.S  WRTS1
00002158  13C0 00F3000B            139            MOVE.B D0,ACIA3D.L
0000215E  4E75                     140  WRTS1     RTS
00002160                           141            
00002160  0839 0000 00F30009       142  WIN      BTST.B #RDRF,ACIA3C.L
00002168  6708                     143           BEQ.S  WRTS2
0000216A  1039 00F3000B            144           MOVE.B ACIA3D.L,D0
00002170  61A4                     145           BSR COUT
00002172  4E75                     146  WRTS2    RTS
00002174                           147  
00002174  0839 0000 00F00009       148  WCIN     BTST.B #RDRF,ACIAC.L
0000217C  6708                     149           BEQ.S  WRTS3
0000217E  1039 00F0000B            150           MOVE.B ACIAD.L,D0
00002184  61C8                     151           BSR WOUT
00002186  4E75                     152  WRTS3    RTS
00002188                           153           
00002188                           154  ; A3 POINTED TO FIRST BYTE
00002188                           155  ; END WITH 0
00002188                           156  
00002188  101B                     157  PSTR     MOVE.B (A3)+,D0
0000218A  B03C 0000                158           CMP.B  #0,D0
0000218E  6704                     159           BEQ.S PSTR1
00002190  6184                     160           BSR COUT
00002192  60F4                     161           BRA.S PSTR
00002194                           162  
00002194  4E75                     163  PSTR1    RTS
00002196                           164  
00002196  101B                     165  WSTR     MOVE.B (A3)+,D0
00002198  B03C 0000                166           CMP.B  #0,D0
0000219C  6712                     167           BEQ.S WSTR1
0000219E  0839 0001 00F30009       168  WOT      BTST.B #TDRE,ACIA3C.L
000021A6  67F6                     169           BEQ.S  WOT
000021A8  13C0 00F3000B            170           MOVE.B D0,ACIA3D.L
000021AE  60E6                     171           BRA.S WSTR
000021B0                           172  
000021B0  4E75                     173  WSTR1    RTS
000021B2                           174  
000021B2= 0D 0A 53 50 49 20 4C     175  TITLE1 DC.B 13,10,'SPI Loader',13,10,0
          6F 61 64 65 72 0D 0A  
          00                    
000021C1= 0D 0A 4C 6F 61 64 69     178  WAITING DC.B 13,10,'Loading',13,10,0
          6E 67 0D 0A 00        
000021CD= 0D 0A 42 79 74 65 20     180  RECVD DC.B 13,10,'Byte Received',13,10,0
          52 65 63 65 69 76 65  
          64 0D 0A 00           
000021DF= 0D 0A 43 68 65 63 6B     183  CHECKING DC.B 13,10,'Checking',13,10,0
          69 6E 67 0D 0A 00     
000021EC= 0D 0A 42 75 73 79 0D     185  BUSYSTR DC.B 13,10,'Busy',13,10,0
          0A 00                 
000021F5= 0D 0A 52 65 61 64 79     187  READYSTR DC.B 13,10,'Ready',13,10,0
          0D 0A 00              
000021FF= 0D 0A 43 53 20 48 69     189  HISTR DC.B 13,10,'CS High',13,10,0
          67 68 0D 0A 00        
0000220B= 0D 0A 43 53 20 6C 6F     191  LOSTR DC.B 13,10,'CS lo',13,10,0
          0D 0A 00              
00002215                           193  
00002215                           194  
00002215                           195              END MAIN

No errors detected
No warnings generated


SYMBOL TABLE INFORMATION
Symbol-name         Value
-------------------------
ACIA2C              F20009
ACIA2D              F2000B
ACIA3C              F30009
ACIA3D              F3000B
ACIAC               F00009
ACIAD               F0000B
BS                  8
BUSYSTR             21EC
CHECKING            21DF
CIN                 213A
CINS                2128
COUT                2116
CR                  D
ESC                 1B
HISTR               21FF
INIT_ACIA           20FC
INT_OFF             2700
INT_ON              2000
LF                  A
LOSTR               220B
MAIN                2000
OUT1X               20D8
OUT1X1              20EA
OUT2X               20F2
PSTR                2188
PSTR1               2194
RDRF                0
READYSTR            21F5
RECVD               21CD
RS                  1E
SP                  20
SUPERVISOR_BIT      5
TDRE                1
TITLE1              21B2
TRACE_BIT           7
WAIT                202A
WAIT2               206A
WAIT3               207C
WAIT4               2096
WAIT5               20A8
WAITING             21C1
WCIN                2174
WIN                 2160
WOT                 219E
WOUT                214E
WRTS1               215E
WRTS2               2172
WRTS3               2186
WSTR                2196
WSTR1               21B0
