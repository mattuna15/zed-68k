00002000 Starting Address
Assembler used: EASy68K Editor/Assembler v5.16.01
Created On: 08/04/2021 21:12:03

00000000  =00F00009                  1  ACIAC    EQU $F00009
00000000  =00F0000B                  2  ACIAD    EQU ACIAC+2
00000000                             3  
00000000  =00F20009                  4  ACIA2C    EQU $F20009
00000000  =00F2000B                  5  ACIA2D    EQU ACIA2C+2
00000000                             6  
00000000  =00F30009                  7  ACIA3C    EQU $F30009
00000000  =00F3000B                  8  ACIA3D    EQU ACIA3C+2
00000000                             9  
00000000  =00002000                 10  INT_ON   EQU  $2000    ; BOTH, SET SUPERVISOR MODE, S=1
00000000  =00002700                 11  INT_OFF  EQU  $2700
00000000                            12  
00000000  =00000000                 13  RDRF    EQU 0           ; ACIAC Receive Data Register Full
00000000  =00000001                 14  TDRE    EQU 1           ; ACIAC Transmit Data Register Empty
00000000                            15  
00000000  =00000005                 16  SUPERVISOR_BIT EQU 5
00000000                            17  
00000000  =00000007                 18  TRACE_BIT EQU 7
00000000                            19  
00000000  =0000000D                 20  CR      EQU 13
00000000  =0000000A                 21  LF      EQU 10
00000000  =00000020                 22  SP      EQU 32
00000000  =00000008                 23  BS      EQU 8
00000000  =0000001E                 24  RS      EQU $1E
00000000  =0000001B                 25  ESC     EQU $1B
00000000                            26  
00000000                            27  
00002000                            28      ORG $2000
00002000                            29  **************************************************
00002000                            30  
00002000                            31  MAIN 
00002000                            32  
00002000  46FC 2700                 33      MOVE.W #INT_OFF,SR 
00002004  6100 004E                 34      BSR INIT_ACIA
00002008                            35     
00002008  47F9 0000210A             36      LEA.L TITLE1.L,A3     ; print START MESSAGE
0000200E  6100 00D0                 37      BSR PSTR
00002012                            38      
00002012                            39      
00002012  08F9 0000 00F40008        40      BSET.B #0,$F40008
0000201A  08F9 0001 00F40008        41      BSET.B #1,$F40008
00002022  08F9 0002 00F40008        42      BSET.B #2,$F40008
0000202A                            43      
0000202A  4EF9 00A00BB4             44      JMP $A00BB4
00002030                            45      
00002030                            46  *****************
00002030                            47  
00002030  1F00                      48  OUT1X        MOVE.B D0,-(SP)    ;SAVE D0
00002032  C03C 000F                 49               AND.B #$F,D0
00002036  0600 0030                 50               ADD.B #'0',D0
0000203A  B03C 0039                 51               CMP.B #'9',D0
0000203E  6302                      52               BLS.S   OUT1X1
00002040  5E00                      53               ADD.B #7,D0
00002042  6100 002A                 54  OUT1X1       BSR COUT
00002046  101F                      55               MOVE.B (SP)+,D0    ;RESTORE D0
00002048  4E75                      56               RTS
0000204A                            57  
0000204A  E818                      58  OUT2X        ROR.B #4,D0
0000204C  61E2                      59               BSR.S OUT1X
0000204E  E918                      60               ROL.B #4,D0
00002050  60DE                      61               BRA OUT1X
00002052                            62  
00002052  4E75                      63          RTS
00002054                            64  **************************************************   
00002054                            65     ; INIT ACIA
00002054                            66  
00002054  13FC 0003 00F00009        67  INIT_ACIA  MOVE.B #3,ACIAC.L   ; RESET ACIA
0000205C  303C 0064                 68             MOVE.W #100,D0
00002060  51C8 FFFE                 69             DBRA  D0,*
00002064  13FC 0015 00F00009        70             MOVE.B #$15,ACIAC.L   ; rts enabled 9600 8ne
0000206C  4E75                      71             RTS
0000206E                            72  
0000206E  0839 0001 00F00009        73  COUT      BTST.B #TDRE,ACIAC.L
00002076  67F6                      74            BEQ.S  COUT
00002078  13C0 00F0000B             75            MOVE.B D0,ACIAD.L
0000207E  4E75                      76            RTS
00002080                            77  
00002080                            78  
00002080  0839 0000 00F20009        79  CINS      BTST.B #RDRF,ACIA2C.L
00002088  67F6                      80            BEQ.S  CINS
0000208A  1039 00F2000B             81            MOVE.B ACIA2D.L,D0
00002090  4E75                      82            RTS
00002092                            83  
00002092                            84  
00002092  0839 0000 00F00009        85  CIN      BTST.B #RDRF,ACIAC.L
0000209A  67F6                      86           BEQ.S  CIN
0000209C  1039 00F0000B             87           MOVE.B ACIAD.L,D0
000020A2  61CA                      88           BSR COUT
000020A4  4E75                      89           RTS
000020A6                            90           
000020A6  0839 0001 00F30009        91  WOUT      BTST.B #TDRE,ACIA3C.L
000020AE  6706                      92            BEQ.S  WRTS1
000020B0  13C0 00F3000B             93            MOVE.B D0,ACIA3D.L
000020B6  4E75                      94  WRTS1     RTS
000020B8                            95            
000020B8  0839 0000 00F30009        96  WIN      BTST.B #RDRF,ACIA3C.L
000020C0  6708                      97           BEQ.S  WRTS2
000020C2  1039 00F3000B             98           MOVE.B ACIA3D.L,D0
000020C8  61A4                      99           BSR COUT
000020CA  4E75                     100  WRTS2    RTS
000020CC                           101  
000020CC  0839 0000 00F00009       102  WCIN     BTST.B #RDRF,ACIAC.L
000020D4  6708                     103           BEQ.S  WRTS3
000020D6  1039 00F0000B            104           MOVE.B ACIAD.L,D0
000020DC  61C8                     105           BSR WOUT
000020DE  4E75                     106  WRTS3    RTS
000020E0                           107           
000020E0                           108  ; A3 POINTED TO FIRST BYTE
000020E0                           109  ; END WITH 0
000020E0                           110  
000020E0  101B                     111  PSTR     MOVE.B (A3)+,D0
000020E2  B03C 0000                112           CMP.B  #0,D0
000020E6  6704                     113           BEQ.S PSTR1
000020E8  6184                     114           BSR COUT
000020EA  60F4                     115           BRA.S PSTR
000020EC                           116  
000020EC  4E75                     117  PSTR1    RTS
000020EE                           118  
000020EE  101B                     119  WSTR     MOVE.B (A3)+,D0
000020F0  B03C 0000                120           CMP.B  #0,D0
000020F4  6712                     121           BEQ.S WSTR1
000020F6  0839 0001 00F30009       122  WOT      BTST.B #TDRE,ACIA3C.L
000020FE  67F6                     123           BEQ.S  WOT
00002100  13C0 00F3000B            124           MOVE.B D0,ACIA3D.L
00002106  60E6                     125           BRA.S WSTR
00002108                           126  
00002108  4E75                     127  WSTR1    RTS
0000210A                           128  
0000210A= 0D 0A 53 50 49 20 4C     129  TITLE1 DC.B 13,10,'SPI Loader',13,10,0
          6F 61 64 65 72 0D 0A  
          00                    
00002119= 0D 0A 4C 6F 61 64 69     132  WAITING DC.B 13,10,'Loading',13,10,0
          6E 67 0D 0A 00        
00002125= 0D 0A 42 79 74 65 20     134  RECVD DC.B 13,10,'Byte Received',13,10,0
          52 65 63 65 69 76 65  
          64 0D 0A 00           
00002137= 0D 0A 43 68 65 63 6B     137  CHECKING DC.B 13,10,'Checking',13,10,0
          69 6E 67 0D 0A 00     
00002144= 0D 0A 42 75 73 79 0D     139  BUSYSTR DC.B 13,10,'Busy',13,10,0
          0A 00                 
0000214D                           141              END MAIN

No errors detected
No warnings generated


SYMBOL TABLE INFORMATION
Symbol-name         Value
-------------------------
ACIA2C              F20009
ACIA2D              F2000B
ACIA3C              F30009
ACIA3D              F3000B
ACIAC               F00009
ACIAD               F0000B
BS                  8
BUSYSTR             2144
CHECKING            2137
CIN                 2092
CINS                2080
COUT                206E
CR                  D
ESC                 1B
INIT_ACIA           2054
INT_OFF             2700
INT_ON              2000
LF                  A
MAIN                2000
OUT1X               2030
OUT1X1              2042
OUT2X               204A
PSTR                20E0
PSTR1               20EC
RDRF                0
RECVD               2125
RS                  1E
SP                  20
SUPERVISOR_BIT      5
TDRE                1
TITLE1              210A
TRACE_BIT           7
WAITING             2119
WCIN                20CC
WIN                 20B8
WOT                 20F6
WOUT                20A6
WRTS1               20B6
WRTS2               20CA
WRTS3               20DE
WSTR                20EE
WSTR1               2108
