00000400 Starting Address
Assembler used: EASy68K Editor/Assembler v5.16.01
Created On: 01/11/2021 09:41:03

00000000  =00F00009                  1  ACIAC    EQU $F00009
00000000  =00F0000B                  2  ACIAD    EQU ACIAC+2
00000000                             3  
00000000  =00000000                  4  RDRF    EQU 0           ; ACIAC Receive Data Register Full
00000000  =00000001                  5  TDRE    EQU 1           ; ACIAC Transmit Data Register Empty
00000000                             6  
00000000  =0000000D                  7  CR      EQU 13
00000000  =0000000A                  8  LF      EQU 10
00000000  =00000020                  9  SP      EQU 32
00000000  =00000008                 10  BS      EQU 8
00000000  =0000001E                 11  RS      EQU $1E
00000000  =0000001B                 12  ESC     EQU $1B
00000000                            13  
00000000  =0000E000                 14  SUPER_STACK   EQU $00E000   ; SUPER STACK TOP Address
00000000  =0000E000                 15  RAMBASE_INIT  EQU $00E000
00000000                            16  
00000000  =00F40041                 17  DATA_TX EQU $F40041
00000000  =00F40043                 18  DATA_RX EQU $F40043
00000000  =00F40045                 19  DATA_CTL EQU $F40045
00000000  =00F40046                 20  DATA_TX_SPACE EQU $F40046
00000000  =00F40048                 21  DATA_RX_COUNT EQU $F40048
00000000                            22  
00000000                            23  * TCP0_TxValid    => eth_ctl(6), --Transmit data valid
00000000                            24  *        TCP0_TxReady    => eth_ctl(3), --Transmit data ready
00000000                            25  *        TCP0_RxValid    => eth_ctl(2), --Receive data valid
00000000                            26  *        TCP0_RxReady    => eth_ctl(5)  --Receive data ready
00000000                            27  
00000000  =00000006                 28  TXVL EQU 6
00000000  =00000003                 29  TXRDY EQU 3
00000000  =00000002                 30  RXVLD EQU 2
00000000  =00000005                 31  RXRDY EQU 5
00000000                            32  
00000000                            33  
00000400                            34      ORG $0400
00000400                            35  **************************************************
00000400                            36  
00000400                            37  MAIN 
00000400                            38  
00000400  6100 003A                 39      BSR INIT_ACIA
00000404                            40     
00000404  47F9 000004FD             41      LEA.L TITLE1.L,A3     ; print START MESSAGE
0000040A  6100 00CC                 42      BSR PSTR
0000040E                            43  
0000040E                            44      ;lea AT.l,a3
0000040E                            45      ;bsr wstr
0000040E                            46      
0000040E                            47  LOOP
0000040E                            48  
0000040E  6100 00A2                 49      BSR WIN
00000412                            50          
00000412  6100 0078                 51      BSR WCIN
00000416                            52      
00000416  60F6                      53      BRA LOOP
00000418                            54              
00000418                            55  
00000418  1F00                      56  OUT1X        MOVE.B D0,-(SP)    ;SAVE D0
0000041A  C03C 000F                 57               AND.B #$F,D0
0000041E  0600 0030                 58               ADD.B #'0',D0
00000422  B03C 0039                 59               CMP.B #'9',D0
00000426  6302                      60               BLS.S   OUT1X1
00000428  5E00                      61               ADD.B #7,D0
0000042A  6100 001A                 62  OUT1X1       BSR COUT
0000042E  101F                      63               MOVE.B (SP)+,D0    ;RESTORE D0
00000430  4E75                      64               RTS
00000432                            65  
00000432  E818                      66  OUT2X        ROR.B #4,D0
00000434  61E2                      67               BSR.S OUT1X
00000436  E918                      68               ROL.B #4,D0
00000438  60DE                      69               BRA OUT1X
0000043A                            70  
0000043A  4E75                      71          RTS
0000043C                            72  **************************************************   
0000043C                            73     ; INIT ACIA
0000043C                            74  
0000043C  13FC 0000 00F00009        75  INIT_ACIA  MOVE.B #0,ACIAC.L   ; disable interrupts
00000444                            76  *           MOVE.W #100,D0
00000444                            77  *           DBRA  D0,*
00000444                            78  *           MOVE.B #$15,ACIAC.L   ; rts enabled 9600 8ne
00000444  4E75                      79             RTS
00000446                            80             
00000446                            81  
00000446  0839 0003 00F40045        82  COUT      BTST.B #TXRDY,DATA_CTL.L
0000044E  67F6                      83            BEQ.S  COUT
00000450                            84            
00000450  13C0 00F40041             85            MOVE.B D0,DATA_TX.L 
00000456  08F9 0006 00F40045        86            BSET.B #TXVL,DATA_CTL.L
0000045E  08B9 0006 00F40045        87            BCLR.B #TXVL,DATA_CTL.L 
00000466  4E75                      88            RTS
00000468                            89  
00000468  0839 0002 00F40045        90  CIN      BTST.B #RXVLD,DATA_CTL.L
00000470  67F6                      91           BEQ.S  CIN
00000472                            92  
00000472  08F9 0005 00F40045        93           BSET.B #RXRDY,DATA_CTL.L
0000047A  1039 00F40043             94           MOVE.B DATA_RX.L,D0
00000480  08B9 0005 00F40045        95           BCLR.B #RXRDY,DATA_CTL.L
00000488                            96           
00000488  61BC                      97           BSR COUT
0000048A                            98  
0000048A                            99  
0000048A  4E75                     100           RTS
0000048C                           101  
0000048C  0839 0002 00F40045       102  WCIN     BTST.B #RXVLD,DATA_CTL.L
00000494  671A                     103           BEQ.S  WCIN1
00000496                           104  
00000496  08F9 0005 00F40045       105           BSET.B #RXRDY,DATA_CTL.L
0000049E  1039 00F40043            106           MOVE.B DATA_RX.L,D0
000004A4  08B9 0005 00F40045       107           BCLR.B #RXRDY,DATA_CTL.L
000004AC                           108           
000004AC  6100 0018                109           BSR WOUT
000004B0                           110           ;BSR COUT
000004B0                           111  
000004B0  4E75                     112  WCIN1    RTS
000004B2                           113  
000004B2  0839 0000 00F00009       114  WIN      BTST.B #RDRF,ACIAC.L
000004BA  6708                     115           BEQ.S  WRTS2
000004BC  1039 00F0000B            116           MOVE.B ACIAD.L,D0
000004C2                           117           
000004C2  6182                     118           BSR COUT
000004C4                           119  
000004C4  4E75                     120  WRTS2    RTS
000004C6                           121           
000004C6                           122           
000004C6                           123  *COUT      BTST.B #TDRE,ACIAC.L
000004C6                           124           
000004C6  0839 0001 00F00009       125  WOUT      BTST.B #TDRE,ACIAC.L
000004CE  67F6                     126            BEQ.S  WOUT     
000004D0  13C0 00F0000B            127            MOVE.B D0,ACIAD.L
000004D6  4E75                     128  WRTS1     RTS
000004D8                           129            
000004D8                           130  
000004D8                           131  
000004D8                           132  ; A3 POINTED TO FIRST BYTE
000004D8                           133  ; END WITH 0
000004D8                           134  
000004D8  101B                     135  PSTR     MOVE.B (A3)+,D0
000004DA  B03C 0000                136           CMP.B  #0,D0
000004DE  6706                     137           BEQ.S PSTR1
000004E0  6100 FF64                138           BSR COUT
000004E4  60F2                     139           BRA.S PSTR
000004E6                           140  
000004E6  4E75                     141  PSTR1    RTS
000004E8                           142  
000004E8  101B                     143  WSTR     MOVE.B (A3)+,D0
000004EA  B03C 0000                144           CMP.B  #0,D0
000004EE  6704                     145           BEQ.S WSTR1
000004F0                           146           
000004F0  61D4                     147           BSR   WOUT
000004F2                           148  
000004F2  60F4                     149           BRA.S WSTR
000004F4                           150  
000004F4  4E75                     151  WSTR1    RTS
000004F6                           152  
000004F6= 0D 0A 41 54 0D 0A 00     153  AT DC.B 13,10,'AT',13,10,0
000004FD= 0D 0A 54 65 72 6D 69     154  TITLE1 DC.B 13,10,'Terminal',13,10,0
          6E 61 6C 0D 0A 00     
0000050A= 0D 0A 4C 6F 61 64 69     156  WAITING DC.B 13,10,'Loading',13,10,0
          6E 67 0D 0A 00        
00000516= 0D 0A 42 79 74 65 20     158  RECVD DC.B 13,10,'Byte Received',13,10,0
          52 65 63 65 69 76 65  
          64 0D 0A 00           
00000528= 0D 0A 43 68 65 63 6B     161  CHECKING DC.B 13,10,'Checking',13,10,0
          69 6E 67 0D 0A 00     
00000535= 0D 0A 4E 6F 20 43 61     163  NOCARD DC.B 13,10,'No Card',13,10,0
          72 64 0D 0A 00        
00000541= 0D 0A 43 61 72 64 20     165  CARDV1 DC.B 13,10,'Card V1',13,10,0
          56 31 0D 0A 00        
0000054D= 0D 0A 43 61 72 64 20     167  CARDV2 DC.B 13,10,'Card V2',13,10,0
          56 32 0D 0A 00        
00000559= 0D 0A 43 41 52 44 20     169  CARDHC DC.B 13,10,'CARD HC',13,10,0
          48 43 0D 0A 00        
00000565= 0D 0A 52 65 61 64 69     171  READING DC.B 13,10,'Reading',13,10,0
          6E 67 0D 0A 00        
00000571= 0D 0A 42 75 73 79 0D     173  BUSYSTR DC.B 13,10,'Busy',13,10,0
          0A 00                 
0000057A= 2E 00                    175  FULLSTOP DC.B '.',0
0000057C                           176  
0000057C                           177              END MAIN

No errors detected
No warnings generated


SYMBOL TABLE INFORMATION
Symbol-name         Value
-------------------------
ACIAC               F00009
ACIAD               F0000B
AT                  4F6
BS                  8
BUSYSTR             571
CARDHC              559
CARDV1              541
CARDV2              54D
CHECKING            528
CIN                 468
COUT                446
CR                  D
DATA_CTL            F40045
DATA_RX             F40043
DATA_RX_COUNT       F40048
DATA_TX             F40041
DATA_TX_SPACE       F40046
ESC                 1B
FULLSTOP            57A
INIT_ACIA           43C
LF                  A
LOOP                40E
MAIN                400
NOCARD              535
OUT1X               418
OUT1X1              42A
OUT2X               432
PSTR                4D8
PSTR1               4E6
RAMBASE_INIT        E000
RDRF                0
READING             565
RECVD               516
RS                  1E
RXRDY               5
RXVLD               2
SP                  20
SUPER_STACK         E000
TDRE                1
TITLE1              4FD
TXRDY               3
TXVL                6
WAITING             50A
WCIN                48C
WCIN1               4B0
WIN                 4B2
WOUT                4C6
WRTS1               4D6
WRTS2               4C4
WSTR                4E8
WSTR1               4F4
